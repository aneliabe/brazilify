<section class="top-workers">
  <h3>Prestadores de serviços perto de você</h3>
  <div class="grid cols-3">
    <% @top_workers.each do |w| %>
      <div class="card worker-card">
        <div class="header">
          <img src="<%= w.user.avatar.presence || 'https://placehold.co/72x72' %>" class="avatar" />
          <div class="info">
            <h4><%= w.user.full_name %></h4>
            <p class="role">
              <i class="fa-solid fa-screwdriver-wrench"></i>
              <%= w.services.first&.name || "Profissional" %> ·
              <i class="fa-solid fa-location-dot"></i>
              <%= [w.user.city, w.user.country].compact.join(", ") %>
            </p>
          </div>
        </div>
        <p class="desc"><%= (w.description || "Profissional qualificado e bem avaliado.").truncate(120) %></p>
        <div class="meta">
          <span class="rating">
            <i class="fa-solid fa-star"></i> <%= w.average_rating %>
          </span>
          <span class="dot">•</span>
          <span class="reviews"><%= pluralize(w.reviews.size, "avaliação", "avaliações") %></span>
        </div>
        <div class="worker-cta" style="margin-top: .8rem;">
          <%= link_to "Ver perfil", worker_path(w), class: "btn btn-accent" %>
        </div>
      </div>
    <% end %>
  </div>
</section>
