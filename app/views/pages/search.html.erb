<%= render "shared/search_bar", city: params[:city] %>

<section class="search-results container">
  <div class="d-flex align-items-center justify-content-between mb-3">
      <h3 class="mb-0">
    Resultados
    <% if params[:city].present? %>
      para <strong><%= params[:city] %></strong>
    <% end %>
    <% if params[:category_id].present? && @categories %>
      <% category = @categories.find { |c| c.id == params[:category_id].to_i } %>
      · categoria: <strong><%= category&.name %></strong>
    <% end %>
    <% if params[:service_id].present? %>
      <% service = Service.find_by(id: params[:service_id]) %>
      · serviço: <strong><%= service&.name %></strong>
    <% end %>
    <% if params[:q].present? %>
      · busca: <strong><%= params[:q] %></strong>
    <% end %>
  </h3>

    <div class="text-end">
      <%= link_to "Voltar para a Home", root_path, class: "see-all-btn" %>
    </div>
  </div>

  <% if @workers.present? && @workers.any? %>
    <div class="meta mb-2">
      <span><%= @workers.size %> <%= @workers.size == 1 ? "profissional encontrado" : "profissionais encontrados" %></span>
    </div>

    <div class="grid cols-3">
      <% @workers.each do |w| %>
        <%= render "shared/results_card", w: w %>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <p>Nenhum profissional encontrado para esses filtros.</p>
      <ul class="small">
        <li>Tente outra cidade (ex.: “Dublin, IE”).</li>
        <li>Ou remova o serviço para ampliar os resultados.</li>
      </ul>
    </div>
  <% end %>
</section>
