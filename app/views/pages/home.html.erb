<section class="info-bar">
  <div class="container d-flex justify-content-center gap-4 flex-wrap py-2">
    <div class="d-flex align-items-center gap-1 text-white small">
      <i class="fa-solid fa-shield-halved"></i> Pagamentos protegidos
    </div>
    <div class="d-flex align-items-center gap-1 text-white small">
      <i class="fa-solid fa-circle-check"></i> Brasileiros verificados
    </div>
    <div class="d-flex align-items-center gap-1 text-white small">
      <i class="fa-solid fa-comments"></i> Fale em português
    </div>
  </div>
</section>
<section class="search-hero">
  <h1>Encontre brasileiros na sua cidade</h1>
  <%= form_with url: "#", method: :get, html: { class: "searchbar", role: "search" } do %>
    <i class="fa-solid fa-location-dot"></i>
    <input type="text"
           name="city"
           placeholder="Digite a cidade (ex: Boston, US)"
           autocomplete="off" />
    <button type="submit" class="btn-accent">
      <i class="fa-solid fa-magnifying-glass"></i> Buscar
    </button>
  <% end %>
</section>

<section class="popular-services">
  <h3>Serviços Populares</h3>
  <div class="grid chips">
    <% @popular_services.each do |svc| %>
      <%= link_to svc[:name],
                  search_path(city: params[:city], q: svc[:name]),
                  class: "chip" %>
    <% end %>
  </div>
  <div class="see-all">
    <%= link_to "Ver todas as categorias", "#", class: "see-all-btn" %>
  </div>
</section>

<section class="top-workers">
  <h3>Prestadores de serviços perto de você</h3>
  <div class="grid cols-3">
    <% @best_workers.each do |w| %>
      <div class="card worker-card <%= w[:online] ? 'online' : 'offline' %>">
        <div class="header">
          <img src="<%= w[:avatar] || 'https://placehold.co/72x72' %>" class="avatar" />
          <div class="info">
            <h4><%= w[:name] %></h4>
            <p class="role">
              <i class="fa-solid fa-screwdriver-wrench"></i> <%= w[:role] %> ·
              <i class="fa-solid fa-location-dot"></i> <%= w[:city] %>
            </p>
          </div>
        </div>
        <p class="desc"><%= (w[:description] || "Profissional qualificado e bem avaliado.").truncate(120) %></p>
        <div class="meta">
          <span class="rating"><i class="fa-solid fa-star"></i> <%= w[:rating] %></span>
          <span class="dot">•</span>
          <span class="distance"><i class="fa-regular fa-compass"></i> <%= w[:dist] %></span>
        </div>
      </div>
    <% end %>
  </div>
</section>
